{"version":3,"sources":["src/_version.ts","src/polyfill/Array_isArray.ts","src/enumerable.ts","src/polyfill/Enumerable_iterator.es5.ts","src/map/map.es5.ts","src/anonymous.ts","src/append.ts","src/apply.ts","src/array.ts","src/concat.ts","src/distinct.ts","src/except.ts","src/fromJson.ts","src/groupBy.ts","src/intersect.ts","src/join.ts","src/list.ts","src/orderBy.ts","src/prepend.ts","src/range.ts","src/reverse.ts","src/round.ts","src/select.ts","src/selector.ts","src/skip.ts","src/take.ts","src/traverse.ts","src/union.ts","src/where.ts","src/wrap.ts","src/zip.ts"],"names":["exjs","version","Array","isArray","arg","Object","prototype","toString","call","Enumerable","getEnumerator","moveNext","current","undefined","aggregate","seed","accumulator","active","enumerator","this","all","predicate","e","i","any","append","items","_i","arguments","length","Error","apply","action","at","index","average","selector","count","total","t","concat","second","difference","comparer","f2","s2","en","intersection","intersect","toArray","aNotB","except","bNotA","distinct","first","match","firstIndex","forEach","groupBy","keySelector","join","inner","outerKeySelector","innerKeySelector","resultSelector","last","l","lastIndex","j","max","Math","min","orderBy","orderByDescending","prepend","reverse","select","selectMany","skip","skipWhile","standardDeviation","avg","sum","diff","sqrt","take","takeWhile","traverse","traverseUnique","matcher","arr","push","toMap","valueSelector","toList","union","where","filter","zip","iteratorFromEnumerable","enu","next","res","done","value","sym","window","Symbol","iterator","Map","enumerable","_keys","_values","Function","set","defineProperty","clear","delete","key","indexOf","splice","entries","_this","range","size","callbackFn","thisArg","keys","vals","len","get","has","values","m","List","_global","global","anonymous","appendEnumerator","prev","firstit","secondit","stage","applyEnumerator","arrayEnumerator","ArrayEnumerable","_super","slice","__extends","writable","configurable","concatEnumerator","s","distinctEnumerator","visited","hit","exceptEnumerator","f","x","fromJson","o","mappingOverrides","mapSubProperty","mapping","rv","mapped","$jsonMappings","groupByEnumerator","grps","createGroups","k1","k2","grp","Group","_add","_arr","intersectEnumerator","joinEnumerator","ins","cur","__","constructor","toLocaleString","pop","shift","start","end","sort","compareFn","unshift","searchElement","fromIndex","lastIndexOf","every","callbackfn","some","map","reduce","initialValue","reduceRight","remove","item","removeWhere","p","hasOwnProperty","list","removed","orderByEnumerable","source","isDescending","OrderedEnumerable","keyComparer","Source","factor","Sorter","a","b","sorter","thenBy","ThenEnumerable","thenByDescending","parentSorter","thisSorter","fn","prependEnumerator","rangeEnumerator","increment","reverseEnumerator","round","digits","pow","selectEnumerator","selectManyEnumerator","selectorEnumerator","obj","skipEnumerator","skipWhileEnumerator","takeEnumerator","takeWhileEnumerator","traverseEnumerator","started","enstack","traverseUniqueEnumerator","turnstile","existing","unionEnumerator","whereEnumerator","c","wrapEnumerator","wrapped","ex","zipEnumerator"],"mappings":"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","file":"ex.min.js","sourcesContent":["namespace exjs {\n    export var version = '0.5.0';\n}","namespace exjs {\r\n    if (!Array.isArray) {\r\n        Array.isArray = function (arg): arg is Array<any> {\r\n            return Object.prototype.toString.call(arg) === '[object Array]';\r\n        };\r\n    }\r\n}","namespace exjs {\r\n    export interface IProjectionFunc<T, TResult> {\r\n        (t: T): TResult;\r\n    }\r\n    export interface IProjectionIndexFunc<T, TResult> {\r\n        (t: T, index: number): TResult;\r\n    }\r\n    export interface IEnumerable<T> {\r\n        getEnumerator(): IEnumerator<T>;\r\n    }\r\n    export interface IEnumerableEx<T> extends IEnumerable<T> {\r\n        aggregate<TAccumulate>(seed: TAccumulate, accumulator: (acc: TAccumulate, cur: T) => TAccumulate): TAccumulate;\r\n        all(predicate: IProjectionFunc<T, boolean>): boolean;\r\n        all(predicate: IProjectionIndexFunc<T, boolean>): boolean;\r\n        any(predicate?: IProjectionFunc<T, boolean>): boolean;\r\n        any(predicate?: IProjectionIndexFunc<T, boolean>): boolean;\r\n        append(...items: T[]): IEnumerableEx<T>;\r\n        apply<T>(action: IProjectionFunc<T, any>): IEnumerableEx<T>;\r\n        apply<T>(action: IProjectionIndexFunc<T, any>): IEnumerableEx<T>;\r\n        at(index: number): T;\r\n        average(selector?: (t: T) => number): number;\r\n        concat(second: IEnumerable<T>): IEnumerableEx<T>;\r\n        concat(second: T[]): IEnumerableEx<T>;\r\n        count(predicate?: (t: T) => boolean): number;\r\n        difference(second: IEnumerable<T>, comparer?: (f: T, s: T) => boolean): IDifference<T>;\r\n        difference(second: T[], comparer?: (f: T, s: T) => boolean): IDifference<T>;\r\n        distinct(comparer?: (f: T, s: T) => boolean): IEnumerableEx<T>;\r\n        except(second: IEnumerable<T>, comparer?: (f: T, s: T) => boolean): IEnumerableEx<T>;\r\n        except(second: T[], comparer?: (f: T, s: T) => boolean): IEnumerableEx<T>;\r\n        first(match?: (t: T) => boolean): T;\r\n        firstIndex(match?: (t: T) => boolean): number;\r\n        forEach (action: (t: T) => any);\r\n        groupBy<TKey>(keySelector: (t: T) => TKey, comparer?: (k1: TKey, k2: TKey) => boolean): IEnumerableEx<IGrouping<TKey, T>>;\r\n        intersect(second: IEnumerable<T>, comparer?: (f: T, s: T) => boolean): IEnumerableEx<T>;\r\n        intersect(second: T[], comparer?: (f: T, s: T) => boolean): IEnumerableEx<T>;\r\n        join<TInner, TKey, TResult>(inner: IEnumerable<TInner>, outerKeySelector: (t: T) => TKey, innerKeySelector: (t: TInner) => TKey, resultSelector: (o: T, i: TInner) => TResult, comparer?: (k1: TKey, k2: TKey) => boolean): IEnumerableEx<TResult>;\r\n        join<TInner, TKey, TResult>(inner: TInner[], outerKeySelector: (t: T) => TKey, innerKeySelector: (t: TInner) => TKey, resultSelector: (o: T, i: TInner) => TResult, comparer?: (k1: TKey, k2: TKey) => boolean): IEnumerableEx<TResult>;\r\n        last(match?: (t: T) => boolean): T;\r\n        lastIndex(match?: (t: T) => boolean): number;\r\n        max(selector?: (t: T) => number): number;\r\n        min(selector?: (t: T) => number): number;\r\n        orderBy<TKey>(keySelector: (t: T) => TKey, comparer?: (f: TKey, s: TKey) => number): IOrderedEnumerable<T>;\r\n        orderByDescending<TKey>(keySelector: (t: T) => TKey, comparer?: (f: TKey, s: TKey) => number): IOrderedEnumerable<T>;\r\n        prepend(...items: T[]): IEnumerableEx<T>;\r\n        reverse(): IEnumerableEx<T>;\r\n        select<TResult>(selector: IProjectionFunc<T, TResult>): IEnumerableEx<TResult>;\r\n        select<TResult>(selector: IProjectionIndexFunc<T, TResult>): IEnumerableEx<TResult>;\r\n        selectMany<TResult>(selector: (t: T) => IEnumerable<TResult>): IEnumerableEx<TResult>;\r\n        selectMany<TResult>(selector: (t: T) => TResult[]): IEnumerableEx<TResult>;\r\n        skip(count: number): IEnumerableEx<T>;\r\n        skipWhile(predicate: IProjectionFunc<T, boolean>): IEnumerableEx<T>;\r\n        skipWhile(predicate: IProjectionIndexFunc<T, boolean>): IEnumerableEx<T>;\r\n        standardDeviation(selector?: (t: T) => number): number;\r\n        sum(selector?: (t: T) => number): number;\r\n        take(count: number): IEnumerableEx<T>;\r\n        takeWhile(predicate: IProjectionFunc<T, boolean>): IEnumerableEx<T>;\r\n        takeWhile(predicate: IProjectionIndexFunc<T, boolean>): IEnumerableEx<T>;\r\n        toArray(): T[];\r\n        toList(): IList<T>;\r\n        toMap<TKey, TValue>(keySelector: (t: T) => TKey, valueSelector: (t: T) => TValue): IMap<TKey, TValue>;\r\n        //toDictionary();\r\n        traverse (selector: (t: T) => T[]): IEnumerableEx<T>;\r\n        traverse (selector: (t: T) => IEnumerable<T>): IEnumerableEx<T>;\r\n        traverseUnique (selector: (t: T) => T[], matcher?: (t1: T, t2: T) => boolean): IEnumerableEx<T>;\r\n        traverseUnique (selector: (t: T) => IEnumerable<T>, matcher?: (t1: T, t2: T) => boolean): IEnumerableEx<T>;\r\n        union(second: IEnumerable<T>, comparer?: (f: T, s: T) => boolean): IEnumerableEx<T>;\r\n        union(second: T[], comparer?: (f: T, s: T) => boolean): IEnumerableEx<T>;\r\n        where(filter: (t: T) => boolean): IEnumerableEx<T>;\r\n        zip<TSecond, TResult>(second: IEnumerable<TSecond>, resultSelector: (f: T, s: TSecond) => TResult): IEnumerableEx<TResult>;\r\n        zip<TSecond, TResult>(second: TSecond[], resultSelector: (f: T, s: TSecond) => TResult): IEnumerableEx<TResult>;\r\n    }\r\n    export interface IEnumerator<T> {\r\n        current: T;\r\n        moveNext(): boolean;\r\n    }\r\n\r\n    export interface IOrderedEnumerable<T> extends IEnumerableEx<T> {\r\n        thenBy<TKey>(keySelector: (t: T) => TKey, comparer?: (f: TKey, s: TKey) => number): IOrderedEnumerable<T>;\r\n        thenByDescending<TKey>(keySelector: (t: T) => TKey, comparer?: (f: TKey, s: TKey) => number): IOrderedEnumerable<T>;\r\n    }\r\n\r\n    export interface IGrouping<TKey, TElement> extends IEnumerableEx<TElement> {\r\n        key: TKey;\r\n    }\r\n\r\n    export interface IDifference<T> {\r\n        intersection: IEnumerableEx<T>;\r\n        aNotB: IEnumerableEx<T>;\r\n        bNotA: IEnumerableEx<T>;\r\n    }\r\n\r\n    export interface IList<T> extends IEnumerableEx<T> {\r\n        //Array<T> methods\r\n        toString(): string;\r\n        toLocaleString(): string;\r\n        pop(): T;\r\n        push(...items: T[]): number;\r\n        shift(): T;\r\n        slice(start: number, end?: number): T[];\r\n        sort(compareFn?: (a: T, b: T) => number): T[];\r\n        splice(start: number): T[];\r\n        splice(start: number, deleteCount: number, ...items: T[]): T[];\r\n        unshift(...items: T[]): number;\r\n        indexOf(searchElement: T, fromIndex?: number): number;\r\n        lastIndexOf(searchElement: T, fromIndex?: number): number;\r\n        every(callbackfn: (value: T, index: number, array: T[]) => boolean, thisArg?: any): boolean;\r\n        some(callbackfn: (value: T, index: number, array: T[]) => boolean, thisArg?: any): boolean;\r\n        forEach(callbackfn: (value: T, index: number, array: T[]) => void, thisArg?: any): void;\r\n        map<U>(callbackfn: (value: T, index: number, array: T[]) => U, thisArg?: any): U[];\r\n        filter(callbackfn: (value: T, index: number, array: T[]) => boolean, thisArg?: any): T[];\r\n        reduce(callbackfn: (previousValue: T, currentValue: T, currentIndex: number, array: T[]) => T, initialValue?: T): T;\r\n        reduce<U>(callbackfn: (previousValue: U, currentValue: T, currentIndex: number, array: T[]) => U, initialValue: U): U;\r\n        reduceRight(callbackfn: (previousValue: T, currentValue: T, currentIndex: number, array: T[]) => T, initialValue?: T): T;\r\n        reduceRight<U>(callbackfn: (previousValue: U, currentValue: T, currentIndex: number, array: T[]) => U, initialValue: U): U;\r\n        length: number;\r\n        [n: number]: T;\r\n\r\n        //List<T> methods\r\n        /**\r\n         * Removes item from list.\r\n         * @param item - item to remove\r\n         */\r\n        remove(item: T): boolean;\r\n        /**\r\n         * Removes items that match predicate.\r\n         * Returns items that were removed.\r\n         * @param predicate - function to match items that should be removed (index parameter is based on original list)\r\n         */\r\n        removeWhere(predicate: (t: T, index?: number) => boolean): IEnumerableEx<T>;\r\n    }\r\n\r\n    export class Enumerable<T> implements IEnumerableEx<T> {\r\n        constructor () {\r\n        }\r\n\r\n        getEnumerator (): IEnumerator<T> {\r\n            return {\r\n                moveNext: function () {\r\n                    return false;\r\n                },\r\n                current: undefined\r\n            };\r\n        }\r\n\r\n        aggregate<TAccumulate>(seed: TAccumulate, accumulator: (acc: TAccumulate, cur: T) => TAccumulate): TAccumulate {\r\n            var active = seed;\r\n            for (var enumerator = this.getEnumerator(); enumerator.moveNext();) {\r\n                active = accumulator(active, enumerator.current);\r\n            }\r\n            return active;\r\n        }\r\n\r\n        all (predicate: IProjectionIndexFunc<T, boolean>): boolean {\r\n            if (predicate) {\r\n                var e = this.getEnumerator();\r\n                var i = 0;\r\n                while (e.moveNext()) {\r\n                    if (!predicate(e.current, i))\r\n                        return false;\r\n                    i++;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n\r\n        any (predicate?: IProjectionIndexFunc<T, boolean>): boolean {\r\n            var e = this.getEnumerator();\r\n            var i = 0;\r\n            while (e.moveNext()) {\r\n                if (!predicate)\r\n                    return true;\r\n                if (predicate(e.current, i))\r\n                    return true;\r\n                i++;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        append(...items: T[]): IEnumerableEx<T> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        apply<T>(action: IProjectionIndexFunc<T, any>): IEnumerableEx<T> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        at (index: number): T {\r\n            var e = this.getEnumerator();\r\n            var i = 0;\r\n            while (e.moveNext()) {\r\n                if (i === index)\r\n                    return e.current;\r\n                i++;\r\n            }\r\n            return undefined;\r\n        }\r\n\r\n        average (selector?: (t: T) => number): number {\r\n            var count = 0;\r\n            var total = 0;\r\n            selector = selector || function (t: T): number {\r\n                    if (typeof t !== \"number\") throw new Error(\"Object is not a number.\");\r\n                    return <number><any>t;\r\n                };\r\n            var e = this.getEnumerator();\r\n            while (e.moveNext()) {\r\n                total += selector(e.current);\r\n                count++;\r\n            }\r\n            if (count === 0) return 0;\r\n            return total / count;\r\n        }\r\n\r\n        concat (second: IEnumerable<T>): IEnumerableEx<T>;\r\n        concat (second: T[]): IEnumerableEx<T>;\r\n        concat (second: any): IEnumerableEx<T> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        count (predicate?: (t: T) => boolean): number {\r\n            var count = 0;\r\n            var e = this.getEnumerator();\r\n            while (e.moveNext()) {\r\n                if (!predicate || predicate(e.current))\r\n                    count++;\r\n            }\r\n            return count;\r\n        }\r\n\r\n        difference (second: IEnumerable<T>, comparer?: (f: T, s: T) => boolean): IDifference<T>;\r\n        difference (second: T[], comparer?: (f: T, s: T) => boolean): IDifference<T>;\r\n        difference (second: any, comparer?: (f: T, s: T) => boolean): IDifference<T> {\r\n            comparer = comparer || function (f2: T, s2: T) {\r\n                    return f2 === s2;\r\n                };\r\n            if (second instanceof Array)\r\n                second = second.en();\r\n            return {\r\n                intersection: this.intersect(second, comparer).toArray().en(),\r\n                aNotB: this.except(second, comparer).toArray().en(),\r\n                bNotA: second.except(this, comparer).toArray().en()\r\n            };\r\n        }\r\n\r\n        distinct (comparer?: (f: T, s: T) => boolean): IEnumerableEx<T> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        except (second: IEnumerable<T>, comparer?: (f: T, s: T) => boolean): IEnumerableEx<T>;\r\n        except (second: T[], comparer?: (f: T, s: T) => boolean): IEnumerableEx<T>;\r\n        except (second: any, comparer?: (f: T, s: T) => boolean): IEnumerableEx<T> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        first (match?: (t: T) => boolean): T {\r\n            var e = this.getEnumerator();\r\n            while (e.moveNext()) {\r\n                if (!match || match(e.current))\r\n                    return e.current;\r\n            }\r\n            return undefined;\r\n        }\r\n\r\n        firstIndex (match?: (t: T) => boolean): number {\r\n            for (var e = this.getEnumerator(), i = 0; e.moveNext(); i++) {\r\n                if (!match || match(e.current))\r\n                    return i;\r\n            }\r\n            return -1;\r\n        }\r\n\r\n        forEach (action: (t: T) => any) {\r\n            for (var en = this.getEnumerator(); en.moveNext();) {\r\n                action(en.current);\r\n            }\r\n        }\r\n\r\n        groupBy<TKey>(keySelector: (t: T) => TKey, comparer?: (k1: TKey, k2: TKey) => boolean): IEnumerableEx<IGrouping<TKey, T>> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        intersect (second: IEnumerable<T>, comparer?: (f: T, s: T) => boolean): IEnumerableEx<T>;\r\n        intersect (second: T[], comparer?: (f: T, s: T) => boolean): IEnumerableEx<T>;\r\n        intersect (second: any, comparer?: (f: T, s: T) => boolean): IEnumerableEx<T> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        join<TInner, TKey, TResult>(inner: IEnumerable<TInner>, outerKeySelector: (t: T) => TKey, innerKeySelector: (t: TInner) => TKey, resultSelector: (o: T, i: TInner) => TResult, comparer?: (k1: TKey, k2: TKey) => boolean): IEnumerableEx<TResult>;\r\n        join<TInner, TKey, TResult>(inner: TInner[], outerKeySelector: (t: T) => TKey, innerKeySelector: (t: TInner) => TKey, resultSelector: (o: T, i: TInner) => TResult, comparer?: (k1: TKey, k2: TKey) => boolean): IEnumerableEx<TResult>;\r\n        join<TInner, TKey, TResult>(inner: any, outerKeySelector: (t: T) => TKey, innerKeySelector: (t: TInner) => TKey, resultSelector: (o: T, i: TInner) => TResult, comparer?: (k1: TKey, k2: TKey) => boolean): IEnumerableEx<TResult> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        last (match?: (t: T) => boolean): T {\r\n            var e = this.getEnumerator();\r\n            var l: T;\r\n            while (e.moveNext()) {\r\n                if (!match || match(e.current))\r\n                    l = e.current;\r\n            }\r\n            return l;\r\n        }\r\n\r\n        lastIndex (match?: (t: T) => boolean): number {\r\n            var j = -1;\r\n            for (var e = this.getEnumerator(), i = 0; e.moveNext(); i++) {\r\n                if (!match || match(e.current))\r\n                    j = i;\r\n            }\r\n            return j;\r\n        }\r\n\r\n        max (selector?: (t: T) => number): number {\r\n            var e = this.getEnumerator();\r\n            if (!e.moveNext())\r\n                return 0;\r\n            selector = selector || function (t: T): number {\r\n                    if (typeof t !== \"number\") throw new Error(\"Object is not a number.\");\r\n                    return <number><any>t;\r\n                };\r\n            var max = selector(e.current);\r\n            while (e.moveNext()) {\r\n                max = Math.max(max, selector(e.current));\r\n            }\r\n            return max;\r\n        }\r\n\r\n        min (selector?: (t: T) => number): number {\r\n            var e = this.getEnumerator();\r\n            if (!e.moveNext())\r\n                return 0;\r\n            selector = selector || function (t: T): number {\r\n                    if (typeof t !== \"number\") throw new Error(\"Object is not a number.\");\r\n                    return <number><any>t;\r\n                };\r\n            var min = selector(e.current);\r\n            while (e.moveNext()) {\r\n                min = Math.min(min, selector(e.current));\r\n            }\r\n            return min;\r\n        }\r\n\r\n        orderBy<TKey>(keySelector: (t: T) => TKey, comparer?: (f: TKey, s: TKey) => number): IOrderedEnumerable<T> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        orderByDescending<TKey>(keySelector: (t: T) => TKey, comparer?: (f: TKey, s: TKey) => number): IOrderedEnumerable<T> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        prepend(...items: T[]): IEnumerableEx<T> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        reverse(): IEnumerableEx<T> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        select<TResult>(selector: IProjectionIndexFunc<T, TResult>): IEnumerableEx<TResult> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        selectMany<TResult>(selector: (t: T) => IEnumerable<TResult>): IEnumerableEx<TResult>;\r\n        selectMany<TResult>(selector: (t: T) => TResult[]): IEnumerableEx<TResult>;\r\n        selectMany<TResult>(selector: (t: T) => any): IEnumerableEx<TResult> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        skip (count: number): IEnumerableEx<T> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        skipWhile (predicate: IProjectionIndexFunc<T, boolean>): IEnumerableEx<T> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        standardDeviation (selector?: (t: T) => number): number {\r\n            var avg = this.average(selector);\r\n            var sum = 0;\r\n            var count = 0;\r\n            selector = selector || function (t: T): number {\r\n                    if (typeof t !== \"number\") throw new Error(\"Object is not a number.\");\r\n                    return <number><any>t;\r\n                };\r\n            var e = this.getEnumerator();\r\n            while (e.moveNext()) {\r\n                var diff = selector(e.current) - avg;\r\n                sum += (diff * diff);\r\n                count++;\r\n            }\r\n            return Math.sqrt(sum / count);\r\n        }\r\n\r\n        sum (selector?: (t: T) => number): number {\r\n            var sum = 0;\r\n            selector = selector || function (t: T): number {\r\n                    if (typeof t !== \"number\") throw new Error(\"Object is not a number.\");\r\n                    return <number><any>t;\r\n                };\r\n            var e = this.getEnumerator();\r\n            while (e.moveNext()) {\r\n                sum += selector(e.current);\r\n            }\r\n            return sum;\r\n        }\r\n\r\n        take (count: number): IEnumerableEx<T> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        takeWhile (predicate: IProjectionIndexFunc<T, boolean>): IEnumerableEx<T> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        traverse (selector: (t: T) => T[]): IEnumerableEx<T>;\r\n        traverse (selector: (t: T) => IEnumerable<T>): IEnumerableEx<T>;\r\n        traverse (selector: any): IEnumerableEx<T> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        traverseUnique (selector: (t: T) => T[], uniqueMatch?: (t1: T, t2: T) => boolean): IEnumerableEx<T>;\r\n        traverseUnique (selector: (t: T) => IEnumerable<T>, matcher?: (t1: T, t2: T) => boolean): IEnumerableEx<T>;\r\n        traverseUnique (selector: any, matcher?: (t1: T, t2: T) => boolean): IEnumerableEx<T> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        toArray (): T[] {\r\n            var arr: T[] = [];\r\n            var enumerator = this.getEnumerator();\r\n            while (enumerator.moveNext()) {\r\n                arr.push(enumerator.current);\r\n            }\r\n            return arr;\r\n        }\r\n\r\n        toMap<TKey, TValue>(keySelector: (t: T) => TKey, valueSelector: (t: T) => TValue): IMap<TKey, TValue> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        toList (): IList<T> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        //toDictionary() {\r\n        //}\r\n\r\n        union (second: IEnumerable<T>, comparer?: (f: T, s: T) => boolean): IEnumerableEx<T>;\r\n        union (second: T[], comparer?: (f: T, s: T) => boolean): IEnumerableEx<T>;\r\n        union (second: any, comparer?: (f: T, s: T) => boolean): IEnumerableEx<T> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        where (filter: (t: T) => boolean): IEnumerableEx<T> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n\r\n        zip<TSecond, TResult>(second: IEnumerable<TSecond>, resultSelector: (f: T, s: TSecond) => TResult): IEnumerableEx<TResult>;\r\n        zip<TSecond, TResult>(second: TSecond[], resultSelector: (f: T, s: TSecond) => TResult): IEnumerableEx<TResult>;\r\n        zip<TSecond, TResult>(second: any, resultSelector: (f: T, s: TSecond) => TResult): IEnumerableEx<TResult> {\r\n            throw new Error(\"Not implemented\");\r\n        }\r\n    }\r\n}","/// <reference path=\"../enumerable.ts\" />\r\n\r\nnamespace exjs {\r\n    var sym = (<any>window).Symbol;\r\n    if (sym && sym.iterator) {\r\n        Enumerable.prototype[sym.iterator] = function (): Iterator<any> {\r\n            return iteratorFromEnumerable<any>(this);\r\n        };\r\n    }\r\n\r\n    function iteratorFromEnumerable<T>(enu: IEnumerable<T>): Iterator<T> {\r\n        var en: IEnumerator<T>;\r\n        return {\r\n            next (): IteratorResult<T> {\r\n                var res = <IteratorResult<T>>{\r\n                    done: true,\r\n                    value: undefined\r\n                };\r\n                if (!enu)\r\n                    return res;\r\n                en = en || enu.getEnumerator();\r\n                if (!en)\r\n                    return res;\r\n                res.done = !en.moveNext();\r\n                res.value = en.current;\r\n                return res;\r\n            }\r\n        };\r\n    }\r\n}","/// <reference path=\"../enumerable.ts\" />\r\n/// <reference path=\"iterable.es5.ts\" />\r\n\r\ndeclare var global;\r\ndeclare var window: Window;\r\n\r\nnamespace exjs {\r\n    export class Map<TKey, TValue> implements IMap<TKey, TValue> {\r\n        private _keys: TKey[] = [];\r\n        private _values: TValue[] = [];\r\n\r\n        get size(): number {\r\n            return this._keys.length;\r\n        }\r\n\r\n        constructor();\r\n        constructor(enumerable: any[][]);\r\n        constructor(enumerable: IEnumerable<any[]>);\r\n        constructor(enumerable?: any) {\r\n            var enu: IEnumerable<any[]>;\r\n            if (enumerable instanceof Array) {\r\n                enu = (<Array<any[]>>enumerable).en();\r\n            } else if (enumerable && enumerable.getEnumerator instanceof Function) {\r\n                enu = <IEnumerable<any[]>>enumerable;\r\n            }\r\n\r\n            if (!enu)\r\n                return;\r\n            for (var en = enu.getEnumerator(); en && en.moveNext();) {\r\n                this.set(en.current[0], en.current[1]);\r\n            }\r\n        }\r\n\r\n        clear() {\r\n            this._keys.length = 0;\r\n            this._values.length = 0;\r\n        }\r\n\r\n        delete(key: TKey): boolean {\r\n            var index = this._keys.indexOf(key);\r\n            if (!(index > -1))\r\n                return false;\r\n            this._keys.splice(index, 1);\r\n            this._values.splice(index, 1);\r\n            return true;\r\n        }\r\n\r\n        entries(): IEnumerableEx<any[]> {\r\n            return exjs.range(0, this.size).select(i => [this._keys[i], this._values[i]]);\r\n        }\r\n\r\n        forEach(callbackFn: (value: TValue, key: TKey, map?: IMap<TKey, TValue>) => void, thisArg?: any) {\r\n            if (thisArg == null)\r\n                thisArg = this;\r\n            for (var i = 0, keys = this._keys, vals = this._values, len = keys.length; i < len; i++) {\r\n                callbackFn.call(thisArg, vals[i], keys[i], this);\r\n            }\r\n        }\r\n\r\n        get(key: TKey): TValue {\r\n            var index = this._keys.indexOf(key);\r\n            return this._values[index];\r\n        }\r\n\r\n        has(key: TKey): boolean {\r\n            return this._keys.indexOf(key) > -1;\r\n        }\r\n\r\n        keys(): IEnumerableEx<TKey> {\r\n            return this._keys.en();\r\n        }\r\n\r\n        set(key: TKey, value: TValue): any {\r\n            var index = this._keys.indexOf(key);\r\n            if (index > -1) {\r\n                this._values[index] = value;\r\n            } else {\r\n                this._keys.push(key);\r\n                this._values.push(value);\r\n            }\r\n            return undefined;\r\n        }\r\n\r\n        values(): IEnumerableEx<TValue> {\r\n            return this._values.en();\r\n        }\r\n    }\r\n\r\n    Enumerable.prototype.toMap = function<T, TKey, TValue> (keySelector: (t: T) => TKey, valueSelector: (t: T) => TValue): Map<TKey, TValue> {\r\n        var m = new Map<TKey, TValue>();\r\n        for (var en = this.getEnumerator(); en.moveNext();) {\r\n            m.set(keySelector(en.current), valueSelector(en.current));\r\n        }\r\n        return m;\r\n    };\r\n    if (List)\r\n        List.prototype.toMap = Enumerable.prototype.toMap;\r\n}\r\n\r\n(function (_global) {\r\n    if (!_global.Map)\r\n        _global.Map = exjs.Map;\r\n})(typeof window === \"undefined\" ? global : window);\r\n","namespace exjs {\n    export function anonymous<T>(iterator: (en: IEnumerator<T>) => boolean): IEnumerableEx<T> {\n        var enumerable = new Enumerable<T>();\n        enumerable.getEnumerator = () => {\n            var enumerator = {\n                current: undefined,\n                moveNext: () => iterator(enumerator)\n            };\n            return enumerator;\n        };\n        return enumerable;\n    }\n}","/// <reference path=\"enumerable.ts\" />\n\nnamespace exjs {\n    function appendEnumerator<T>(prev: IEnumerable<T>, items: T[]): IEnumerator<T> {\n        var stage = 1;\n        var firstit: IEnumerator<T>;\n        var secondit: IEnumerator<T>;\n        var e = {\n            current: undefined,\n            moveNext: function (): boolean {\n                if (stage < 2) {\n                    firstit = firstit || prev.getEnumerator();\n                    if (firstit.moveNext()) {\n                        e.current = firstit.current;\n                        return true;\n                    }\n                    stage++;\n                }\n\n                secondit = secondit || items.en().getEnumerator();\n                if (secondit.moveNext()) {\n                    e.current = secondit.current;\n                    return true;\n                }\n                e.current = undefined;\n                return false;\n            }\n        };\n        return e;\n    }\n\n    Enumerable.prototype.append = function<T>(...items: T[]): IEnumerableEx<T> {\n        var e = new Enumerable<T>();\n        e.getEnumerator = () => appendEnumerator<T>(<IEnumerable<T>>this, items);\n        return e;\n    };\n    if (List)\n        List.prototype.append = Enumerable.prototype.append;\n}","/// <reference path=\"enumerable.ts\" />\r\n\r\nnamespace exjs {\r\n    function applyEnumerator<T>(prev: IEnumerable<T>, action: IProjectionIndexFunc<T, any>): IEnumerator<T> {\r\n        var t: IEnumerator<T>;\r\n        var i = 0;\r\n        var e = {\r\n            current: undefined,\r\n            moveNext: function (): boolean {\r\n                if (!t) t = prev.getEnumerator();\r\n                if (!t.moveNext()) return false;\r\n                action(e.current = t.current, i);\r\n                i++;\r\n                return true;\r\n            }\r\n        };\r\n        return e;\r\n    }\r\n\r\n    Enumerable.prototype.apply = function<T>(action: IProjectionIndexFunc<T, any>): IEnumerableEx<T> {\r\n        var e = new Enumerable<T>();\r\n        e.getEnumerator = () => applyEnumerator(<IEnumerable<T>>this, action);\r\n        return e;\r\n    };\r\n    if (List)\r\n        List.prototype.apply = Enumerable.prototype.apply;\r\n}","/// <reference path=\"enumerable.ts\" />\r\n\r\ninterface Array<T> {\r\n    en(): exjs.IEnumerableEx<T>;\r\n}\r\n\r\nnamespace exjs {\r\n    function arrayEnumerator<T>(arr: T[]): IEnumerator<T> {\r\n        var len = arr.length;\r\n        var e = {moveNext: undefined, current: undefined};\r\n        var index = -1;\r\n        e.moveNext = function () {\r\n            index++;\r\n            if (index >= len) {\r\n                e.current = undefined;\r\n                return false;\r\n            }\r\n            e.current = arr[index];\r\n            return true;\r\n        };\r\n        return e;\r\n    }\r\n\r\n    class ArrayEnumerable<T> extends Enumerable<T> {\r\n        constructor(arr: T[]) {\r\n            super();\r\n\r\n            this.getEnumerator = function () {\r\n                return arrayEnumerator(arr);\r\n            };\r\n            this.toArray = function () {\r\n                return arr.slice(0);\r\n            };\r\n        }\r\n    }\r\n\r\n    function en<T>(): IEnumerableEx<T> {\r\n        if (this && Array.isArray(this))\r\n            return new ArrayEnumerable<T>(this);\r\n        return new Enumerable<T>();\r\n    }\r\n\r\n    try {\r\n        Object.defineProperty(Array.prototype, \"en\", {\r\n            value: en,\r\n            enumerable: false,\r\n            writable: false,\r\n            configurable: false\r\n        });\r\n    } catch (e) {\r\n        //IE8 supports Object.defineProperty only for DOM objects\r\n        (<any>Array.prototype).en = en;\r\n    }\r\n}","/// <reference path=\"enumerable.ts\" />\r\n\r\nnamespace exjs {\r\n    function concatEnumerator<T>(prev: IEnumerable<T>, second: IEnumerable<T>): IEnumerator<T> {\r\n        var t: IEnumerator<T>;\r\n        var s = false;\r\n        var e = {\r\n            current: undefined,\r\n            moveNext: function (): boolean {\r\n                if (!t) t = prev.getEnumerator();\r\n                e.current = undefined;\r\n                if (t.moveNext()) {\r\n                    e.current = t.current;\r\n                    return true;\r\n                }\r\n                if (s) return false;\r\n                s = true;\r\n                t = second.getEnumerator();\r\n                if (!t.moveNext())\r\n                    return false;\r\n                e.current = t.current;\r\n                return true;\r\n            }\r\n        };\r\n        return e;\r\n    }\r\n\r\n    Enumerable.prototype.concat = function<T>(second: any): IEnumerableEx<T> {\r\n        var en: IEnumerable<T> = second instanceof Array ? second.en() : second;\r\n        var e = new Enumerable<T>();\r\n        e.getEnumerator = () => concatEnumerator<T>(<IEnumerable<T>>this, en);\r\n        return e;\r\n    };\r\n    if (List)\r\n        List.prototype.concat = Enumerable.prototype.concat;\r\n}","/// <reference path=\"enumerable.ts\" />\r\n\r\nnamespace exjs {\r\n    function distinctEnumerator<T>(prev: IEnumerable<T>, comparer?: (f: T, s: T) => boolean): IEnumerator<T> {\r\n        var t: IEnumerator<T>;\r\n        var visited = [];\r\n        var e = {\r\n            current: undefined,\r\n            moveNext: function (): boolean {\r\n                if (!t) t = prev.getEnumerator();\r\n                e.current = undefined;\r\n                if (!comparer) {\r\n                    while (t.moveNext()) {\r\n                        if (visited.indexOf(t.current) < 0) {\r\n                            visited.push(e.current = t.current);\r\n                            return true;\r\n                        }\r\n                    }\r\n                    return false;\r\n                }\r\n\r\n                while (t.moveNext()) {\r\n                    for (var i = 0, len = visited.length, hit = false; i < len && !hit; i++) {\r\n                        hit = !!comparer(visited[i], t.current);\r\n                    }\r\n                    if (!hit) {\r\n                        visited.push(e.current = t.current);\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n        };\r\n        return e;\r\n    }\r\n\r\n    Enumerable.prototype.distinct = function<T>(comparer?: (f: T, s: T) => boolean): IEnumerableEx<T> {\r\n        var e = new Enumerable<T>();\r\n        e.getEnumerator = () => distinctEnumerator(<IEnumerable<T>>this, comparer);\r\n        return e;\r\n    };\r\n    if (List)\r\n        List.prototype.distinct = Enumerable.prototype.distinct;\r\n}","/// <reference path=\"enumerable.ts\" />\r\n\r\nnamespace exjs {\r\n    function exceptEnumerator<T>(prev: IEnumerable<T>, second: IEnumerable<T>, comparer?: (f: T, s: T) => boolean): IEnumerator<T> {\r\n        comparer = comparer || function (f: T, s: T) {\r\n            return f === s;\r\n        };\r\n        var t: IEnumerator<T>;\r\n        var e = {\r\n            current: undefined,\r\n            moveNext: function (): boolean {\r\n                if (!t) t = prev.getEnumerator();\r\n                e.current = undefined;\r\n                while (t.moveNext()) {\r\n                    for (var hit = false, x = second.getEnumerator(); x.moveNext() && !hit;) {\r\n                        hit = comparer(t.current, x.current);\r\n                    }\r\n                    if (!hit) {\r\n                        e.current = t.current;\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n        };\r\n        return e;\r\n    }\r\n\r\n    Enumerable.prototype.except = function<T>(second: any, comparer?: (f: T, s: T) => boolean): IEnumerableEx<T> {\r\n        var en: IEnumerable<T> = second instanceof Array ? second.en() : second;\r\n        var e = new Enumerable<T>();\r\n        e.getEnumerator = () => exceptEnumerator(<IEnumerable<T>>this, en, comparer);\r\n        return e;\r\n    };\r\n    if (List)\r\n        List.prototype.except = Enumerable.prototype.except;\r\n} ","interface Function {\r\n    fromJson<T>(o: any, mappingOverrides?: any): T;\r\n}\r\n\r\nFunction.prototype.fromJson = function<T>(o: any, mappingOverrides?: any): T {\r\n    var rv = new this();\r\n    if (o == null)\r\n        return rv;\r\n\r\n    var mapped: string[] = [];\r\n\r\n    for (var key in mappingOverrides) {\r\n        var j = mapSubProperty(o[key], mappingOverrides[key]);\r\n        if (j === undefined)\r\n            continue;\r\n        rv[key] = j;\r\n        mapped.push(key);\r\n    }\r\n\r\n    for (var key in this.$jsonMappings) {\r\n        if (mapped.indexOf(key) > -1)\r\n            continue;\r\n        var j = mapSubProperty(o[key], this.$jsonMappings[key]);\r\n        if (j === undefined)\r\n            continue;\r\n        rv[key] = j;\r\n        mapped.push(key);\r\n    }\r\n\r\n    for (var key in o) {\r\n        if (mapped.indexOf(key) > -1)\r\n            continue;\r\n        rv[key] = o[key];\r\n    }\r\n\r\n    return rv;\r\n\r\n    function mapSubProperty(j: any, mapping: any): any {\r\n        if (j == null)\r\n            return j;\r\n        if (mapping instanceof Function)\r\n            return mapping(j);\r\n        if (mapping instanceof Array) {\r\n            mapping = mapping[0];\r\n            if (!(mapping instanceof Function) || !(j instanceof Array))\r\n                return undefined;\r\n            var arr = [];\r\n            for (var i = 0; i < j.length; i++) {\r\n                arr.push(mapping(j[i]));\r\n            }\r\n            return arr;\r\n        }\r\n        return undefined;\r\n    }\r\n};","/// <reference path=\"enumerable.ts\" />\r\n/// <reference path=\"array.ts\" />\r\n\r\nnamespace exjs {\r\n    function groupByEnumerator<T, TKey>(prev: IEnumerable<T>, keySelector: (t: T) => TKey, comparer?: (k1: TKey, k2: TKey) => boolean): IEnumerator<IGrouping<TKey, T>> {\r\n        var grps: IGrouping<TKey, T>[];\r\n        var i = 0;\r\n        var e = {\r\n            current: undefined,\r\n            moveNext: function (): boolean {\r\n                if (!grps) grps = createGroups<TKey, T>(prev, keySelector, comparer);\r\n                e.current = undefined;\r\n                if (i >= grps.length)\r\n                    return false;\r\n                e.current = grps[i];\r\n                i++;\r\n                return true;\r\n            }\r\n        };\r\n        return e;\r\n    }\r\n\r\n    function createGroups<TKey, TElement>(prev: IEnumerable<TElement>, keySelector: (t: TElement) => TKey, comparer?: (k1: TKey, k2: TKey) => boolean): IGrouping<TKey, TElement>[] {\r\n        comparer = comparer || function (k1, k2) {\r\n            return k1 === k2;\r\n        };\r\n        var grps: Group<TKey, TElement>[] = [];\r\n        var keys: TKey[] = [];\r\n\r\n        var e = prev.getEnumerator();\r\n        var key: TKey;\r\n        while (e.moveNext()) {\r\n            key = keySelector(e.current);\r\n            var index = -1;\r\n            for (var i = 0, len = keys.length; i < len; i++) {\r\n                if (comparer(key, keys[i])) {\r\n                    index = i;\r\n                    break;\r\n                }\r\n            }\r\n            var grp: Group<TKey, TElement>;\r\n            if (index < 0) {\r\n                keys.push(key);\r\n                grps.push(grp = new Group<TKey, TElement>(key));\r\n            } else {\r\n                grp = grps[index];\r\n            }\r\n            grp._add(e.current);\r\n        }\r\n\r\n        return grps;\r\n    }\r\n\r\n    class Group<TKey, TElement> extends Enumerable<TElement> implements IGrouping<TKey, TElement> {\r\n        private _arr: TElement[] = [];\r\n\r\n        constructor (public key: TKey) {\r\n            super();\r\n            this.getEnumerator = () => this._arr.en().getEnumerator();\r\n        }\r\n\r\n        _add (e: TElement) {\r\n            this._arr.push(e);\r\n        }\r\n    }\r\n\r\n    Enumerable.prototype.groupBy = function<T, TKey>(keySelector: (t: T) => TKey, comparer?: (k1: TKey, k2: TKey) => boolean): IEnumerableEx<IGrouping<TKey, T>> {\r\n        var e = new Enumerable<IGrouping<TKey, T>>();\r\n        e.getEnumerator = () => groupByEnumerator<T, TKey>(<IEnumerable<T>>this, keySelector, comparer);\r\n        return e;\r\n    };\r\n    if (List)\r\n        List.prototype.groupBy = Enumerable.prototype.groupBy;\r\n}","/// <reference path=\"enumerable.ts\" />\r\n\r\nnamespace exjs {\r\n    function intersectEnumerator<T>(prev: IEnumerable<T>, second: IEnumerable<T>, comparer?: (f: T, s: T) => boolean): IEnumerator<T> {\r\n        comparer = comparer || function (f: T, s: T) { return f === s; };\r\n        var t: IEnumerator<T>;\r\n        var e = {\r\n            current: undefined,\r\n            moveNext: function (): boolean {\r\n                if (!t) t = en(prev).distinct().getEnumerator();\r\n                e.current = undefined;\r\n                while (t.moveNext()) {\r\n                    for (var hit = false, x = second.getEnumerator(); x.moveNext() && !hit;) {\r\n                        hit = comparer(t.current, x.current);\r\n                    }\r\n                    if (hit) {\r\n                        e.current = t.current;\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n        };\r\n        return e;\r\n    }\r\n\r\n    Enumerable.prototype.intersect = function<T>(second: any, comparer?: (f: T, s: T) => boolean): IEnumerableEx<T> {\r\n        var en: IEnumerable<T> = second instanceof Array ? second.en() : second;\r\n        var e = new Enumerable<T>();\r\n        e.getEnumerator = () => intersectEnumerator(<IEnumerable<T>>this, en, comparer);\r\n        return e;\r\n    };\r\n    if (List)\r\n        List.prototype.intersect = Enumerable.prototype.intersect;\r\n}  ","/// <reference path=\"enumerable.ts\" />\r\n\r\nnamespace exjs {\r\n    function joinEnumerator<TOuter, TInner, TKey, TResult>(prev: IEnumerable<TOuter>, inner: IEnumerable<TInner>, outerKeySelector: (t: TOuter) => TKey, innerKeySelector: (t: TInner) => TKey, resultSelector: (tout: TOuter, tin: TInner) => TResult, comparer?: (k1: TKey, k2: TKey) => boolean): IEnumerator<TResult> {\r\n        comparer = comparer || function (k1, k2) {\r\n            return k1 === k2;\r\n        };\r\n        var s: IEnumerator<TOuter>;\r\n        var ins: TInner[];\r\n        var j = 0;\r\n        var e = {\r\n            current: undefined,\r\n            moveNext: function (): boolean {\r\n                e.current = undefined;\r\n                if (!s) {\r\n                    s = prev.getEnumerator();\r\n                    if (!s.moveNext())\r\n                        return false;\r\n                    ins = en(inner).toArray();\r\n                }\r\n\r\n                var cur: TInner;\r\n                do {\r\n                    for (; j < ins.length; j++) {\r\n                        cur = ins[j];\r\n                        if (comparer(outerKeySelector(s.current), innerKeySelector(cur))) {\r\n                            j++;\r\n                            e.current = resultSelector(s.current, cur);\r\n                            return true;\r\n                        }\r\n                    }\r\n                    j = 0;\r\n                } while (s.moveNext());\r\n                return false;\r\n            }\r\n        };\r\n        return e;\r\n    }\r\n\r\n    Enumerable.prototype.join = function<T,TInner,TKey,TResult>(inner: any, outerKeySelector: (t: T) => TKey, innerKeySelector: (t: TInner) => TKey, resultSelector: (o: T, i: TInner) => TResult, comparer?: (k1: TKey, k2: TKey) => boolean): IEnumerableEx<TResult> {\r\n        var en: IEnumerable<TInner> = inner instanceof Array ? inner.en() : inner;\r\n        var e = new Enumerable<TResult>();\r\n        e.getEnumerator = () => joinEnumerator<T, TInner, TKey, TResult>(<IEnumerable<T>>this, en, outerKeySelector, innerKeySelector, resultSelector, comparer);\r\n        return e;\r\n    };\r\n    if (List)\r\n        List.prototype.join = Enumerable.prototype.join;\r\n}","/// <reference path=\"enumerable.ts\" />\r\n/// <reference path=\"fromJson.ts\" />\r\n\r\nnamespace exjs {\r\n    Enumerable.prototype.toList = function<T>() {\r\n        var l = new List<T>();\r\n\r\n        var enumerator = this.getEnumerator();\r\n        while (enumerator.moveNext()) {\r\n            l.push(enumerator.current);\r\n        }\r\n\r\n        return <IList<T>>l;\r\n    };\r\n\r\n    export class List<T> extends Enumerable<T> implements IList<T> {\r\n        //Array<T> methods\r\n        toString (): string { throw new Error(\"Not implemented\"); }\r\n        toLocaleString (): string { throw new Error(\"Not implemented\"); }\r\n        pop (): T { throw new Error(\"Not implemented\"); }\r\n        push (...items: T[]): number { throw new Error(\"Not implemented\"); }\r\n        shift (): T { throw new Error(\"Not implemented\"); }\r\n        slice (start: number, end?: number): T[] { throw new Error(\"Not implemented\"); }\r\n        sort (compareFn?: (a: T, b: T) => number): T[] { throw new Error(\"Not implemented\"); }\r\n\r\n        splice (start: number): T[];\r\n        splice (start: number, deleteCount: number, ...items: T[]): T[];\r\n        splice (): T[] { throw new Error(\"Not implemented\"); }\r\n\r\n        unshift (...items: T[]): number { throw new Error(\"Not implemented\"); }\r\n        indexOf (searchElement: T, fromIndex?: number): number { throw new Error(\"Not implemented\"); }\r\n        lastIndexOf (searchElement: T, fromIndex?: number): number { throw new Error(\"Not implemented\"); }\r\n        every (callbackfn: (value: T, index: number, array: T[]) => boolean, thisArg?: any): boolean { throw new Error(\"Not implemented\"); }\r\n        some (callbackfn: (value: T, index: number, array: T[]) => boolean, thisArg?: any): boolean { throw new Error(\"Not implemented\"); }\r\n        forEach (callbackfn: (value: T, index: number, array: T[]) => void, thisArg?: any): void { throw new Error(\"Not implemented\"); }\r\n        map<U>(callbackfn: (value: T, index: number, array: T[]) => U, thisArg?: any): U[] { throw new Error(\"Not implemented\"); }\r\n        filter (callbackfn: (value: T, index: number, array: T[]) => boolean, thisArg?: any): T[] { throw new Error(\"Not implemented\"); }\r\n        reduce<U>(callbackfn: (previousValue: U, currentValue: T, currentIndex: number, array: T[]) => U, initialValue: U): U { throw new Error(\"Not implemented\"); }\r\n        reduceRight<U>(callbackfn: (previousValue: U, currentValue: T, currentIndex: number, array: T[]) => U, initialValue: U): U { throw new Error(\"Not implemented\"); }\r\n        length: number;\r\n        [n: number]: T;\r\n\r\n        //List<T> methods\r\n        remove(item: T): boolean { throw new Error(\"Not implemented\"); }\r\n        removeWhere(predicate: (t: T, index?: number) => boolean): IEnumerableEx<T> { throw new Error(\"Not implemented\"); }\r\n    }\r\n\r\n    for (var p in Array) if (Array.hasOwnProperty(p)) List[p] = Array[p];\r\n    function __ () { this.constructor = List; }\r\n    __.prototype = Array.prototype;\r\n    List.prototype = new __();\r\n    for (var key in Enumerable.prototype) {\r\n        if (key === \"getEnumerator\")\r\n            continue;\r\n        List.prototype[key] = Enumerable.prototype[key];\r\n    }\r\n\r\n    List.prototype.getEnumerator = function<T>(): IEnumerator<T> {\r\n        var list = this;\r\n        var len = list.length;\r\n        var e = { moveNext: undefined, current: undefined };\r\n        var index = -1;\r\n        e.moveNext = function () {\r\n            index++;\r\n            if (index >= len) {\r\n                e.current = undefined;\r\n                return false;\r\n            }\r\n            e.current = list[index];\r\n            return true;\r\n        };\r\n        return e;\r\n    };\r\n    List.prototype.remove = function<T>(item: T): boolean {\r\n        return this.removeWhere(t => t === item).any();\r\n    };\r\n    List.prototype.removeWhere = function<T>(predicate: (t: T, index?: number) => boolean): IEnumerableEx<T> {\r\n        var removed = [];\r\n        var cur: T;\r\n        for (var i = this.length - 1; i >= 0; i--) {\r\n            cur = this[i];\r\n            if (predicate(cur, i) === true) {\r\n                this.splice(i, 1);\r\n                removed.push(cur);\r\n            }\r\n        }\r\n        return removed.en().reverse();\r\n    };\r\n}","/// <reference path=\"enumerable.ts\" />\r\n\r\nnamespace exjs {\r\n    function orderByEnumerable<T, TKey>(source: IEnumerable<T>, keySelector: (t: T) => TKey, isDescending: boolean, comparer?: (f: TKey, s: TKey) => number): IOrderedEnumerable<T> {\r\n        return new OrderedEnumerable<T, TKey>(source, keySelector, isDescending, comparer);\r\n    }\r\n\r\n    class OrderedEnumerable<T, TKey> extends Enumerable<T> implements IOrderedEnumerable<T> {\r\n        Source: IEnumerable<T>;\r\n        Sorter: (a: T, b: T) => number;\r\n\r\n        constructor (source: IEnumerable<T>, keySelector: (t: T) => TKey, isDescending: boolean, keyComparer: (f: TKey, s: TKey) => number) {\r\n            super();\r\n\r\n            this.Source = source;\r\n            keyComparer = keyComparer || function (f: TKey, s: TKey) {\r\n                return f > s ? 1 : (f < s ? -1 : 0);\r\n            };\r\n            var factor = (isDescending === true) ? -1 : 1;\r\n            this.Sorter = (a, b) => factor * keyComparer(keySelector(a), keySelector(b));\r\n        }\r\n\r\n        getEnumerator (): IEnumerator<T> {\r\n            var source = this.Source;\r\n            var sorter = this.Sorter;\r\n            var arr: T[];\r\n            var i = 0;\r\n            var e = {\r\n                current: undefined,\r\n                moveNext: function (): boolean {\r\n                    if (!arr) {\r\n                        arr = en(source).toArray();\r\n                        arr.sort(sorter);\r\n                    }\r\n                    e.current = undefined;\r\n                    if (i >= arr.length)\r\n                        return false;\r\n                    e.current = arr[i];\r\n                    i++;\r\n                    return true;\r\n                }\r\n            };\r\n            return e;\r\n        }\r\n\r\n        thenBy<TInnerKey>(keySelector: (t: T) => TInnerKey, comparer?: (f: TInnerKey, s: TInnerKey) => number): IOrderedEnumerable<T> {\r\n            return new ThenEnumerable<T, TKey, TInnerKey>(this, keySelector, false, comparer);\r\n        }\r\n\r\n        thenByDescending<TInnerKey>(keySelector: (t: T) => TInnerKey, comparer?: (f: TInnerKey, s: TInnerKey) => number): IOrderedEnumerable<T> {\r\n            return new ThenEnumerable<T, TKey, TInnerKey>(this, keySelector, true, comparer);\r\n        }\r\n    }\r\n\r\n    class ThenEnumerable<T, TParentKey, TKey> extends OrderedEnumerable<T, TKey> {\r\n        constructor (source: OrderedEnumerable<T, TParentKey>, keySelector: (t: T) => TKey, isDescending: boolean, keyComparer: (f: TKey, s: TKey) => number) {\r\n            super(source, keySelector, isDescending, keyComparer);\r\n\r\n            var parentSorter = source.Sorter;\r\n            var thisSorter = this.Sorter;\r\n            this.Sorter = (a, b) => parentSorter(a, b) || thisSorter(a, b);\r\n        }\r\n    }\r\n\r\n    var fn = Enumerable.prototype;\r\n    fn.orderBy = function<T,TKey>(keySelector: (t: T) => TKey, comparer?: (f: TKey, s: TKey) => number): IOrderedEnumerable<T> {\r\n        return orderByEnumerable(<IEnumerable<T>>this, keySelector, false, comparer);\r\n    };\r\n    fn.orderByDescending = function<T,TKey>(keySelector: (t: T) => TKey, comparer?: (f: TKey, s: TKey) => number): IOrderedEnumerable<T> {\r\n        return orderByEnumerable(<IEnumerable<T>>this, keySelector, true, comparer);\r\n    };\r\n    if (List) {\r\n        List.prototype.orderBy = Enumerable.prototype.orderBy;\r\n        List.prototype.orderByDescending = Enumerable.prototype.orderByDescending;\r\n    }\r\n} ","/// <reference path=\"enumerable.ts\" />\n\nnamespace exjs {\n    function prependEnumerator<T>(prev: IEnumerable<T>, items: T[]): IEnumerator<T> {\n        var stage = 1;\n        var firstit: IEnumerator<T>;\n        var secondit: IEnumerator<T>;\n        var e = {\n            current: undefined,\n            moveNext: function (): boolean {\n                if (stage < 2) {\n                    firstit = firstit || items.en().getEnumerator();\n                    if (firstit.moveNext()) {\n                        e.current = firstit.current;\n                        return true;\n                    }\n                    stage++;\n                }\n\n                secondit = secondit || prev.getEnumerator();\n                if (secondit.moveNext()) {\n                    e.current = secondit.current;\n                    return true;\n                }\n                e.current = undefined;\n                return false;\n            }\n        };\n        return e;\n    }\n\n    Enumerable.prototype.prepend = function<T>(...items: T[]): IEnumerableEx<T> {\n        var e = new Enumerable<T>();\n        e.getEnumerator = () => prependEnumerator<T>(<IEnumerable<T>>this, items);\n        return e;\n    };\n    if (List)\n        List.prototype.prepend = Enumerable.prototype.prepend;\n}","/// <reference path=\"enumerable.ts\" />\r\n\r\nnamespace exjs {\r\n    function rangeEnumerator (start: number, end: number, increment: number): IEnumerator<number> {\r\n        var i = start - increment;\r\n        var e = {\r\n            current: undefined,\r\n            moveNext: function (): boolean {\r\n                i += increment;\r\n                if (i >= end)\r\n                    return false;\r\n                e.current = i;\r\n                return true;\r\n            }\r\n        };\r\n        return e;\r\n    }\r\n\r\n    export function range (start: number, end: number, increment?: number): IEnumerableEx<number> {\r\n        start = start || 0;\r\n        end = end || 0;\r\n        if (start > end)\r\n            throw new Error(\"Start cannot be greater than end.\");\r\n        if (increment == null)\r\n            increment = 1;\r\n        var e = new Enumerable<number>();\r\n        e.getEnumerator = () => rangeEnumerator(start, end, increment);\r\n        return e;\r\n    }\r\n}","/// <reference path=\"enumerable.ts\" />\r\n\r\nnamespace exjs {\r\n    function reverseEnumerator<T>(prev: IEnumerable<T>): IEnumerator<T> {\r\n        var a: T[];\r\n        var i = 0;\r\n        var e = {\r\n            current: undefined,\r\n            moveNext: function (): boolean {\r\n                if (!a) {\r\n                    a = en(prev).toArray();\r\n                    i = a.length;\r\n                }\r\n                i--;\r\n                e.current = a[i];\r\n                return i >= 0;\r\n            }\r\n        };\r\n        return e;\r\n    }\r\n\r\n    Enumerable.prototype.reverse = function<T>(): IEnumerableEx<T> {\r\n        var e = new Enumerable<T>();\r\n        e.getEnumerator = () => reverseEnumerator(<IEnumerable<T>>this);\r\n        return e;\r\n    };\r\n    if (List)\r\n        List.prototype.reverse = Enumerable.prototype.reverse;\r\n}","namespace exjs {\r\n    export function round(value: number, digits?: number) {\r\n        digits = digits || 0;\r\n        if (digits === 0)\r\n            return Math.round(value);\r\n        var shift = Math.pow(10, digits);\r\n        return Math.round(value * shift) / shift;\r\n    }\r\n}","/// <reference path=\"enumerable.ts\" />\r\n/// <reference path=\"array.ts\" />\r\n\r\nnamespace exjs {\r\n    function selectEnumerator<T, TResult>(prev: IEnumerable<T>, selector: IProjectionIndexFunc<T, TResult>): IEnumerator<TResult> {\r\n        var t: IEnumerator<T>;\r\n        var i = 0;\r\n        var e = {\r\n            current: undefined,\r\n            moveNext: function (): boolean {\r\n                if (!t) t = prev.getEnumerator();\r\n                if (!t.moveNext()) return false;\r\n                e.current = selector(t.current, i);\r\n                i++;\r\n                return true;\r\n            }\r\n        };\r\n        return e;\r\n    }\r\n\r\n    function selectManyEnumerator<T, TResult>(prev: IEnumerable<T>, selector: (t: T) => any): IEnumerator<TResult> {\r\n        var t: IEnumerator<T>;\r\n        var active: IEnumerator<TResult>;\r\n        var e = {\r\n            current: undefined,\r\n            moveNext: function (): boolean {\r\n                e.current = undefined;\r\n                if (!t) t = prev.getEnumerator();\r\n                while (!active || !active.moveNext()) {\r\n                    if (!t.moveNext())\r\n                        return false;\r\n                    active = selectorEnumerator<T, TResult>(selector(t.current));\r\n                }\r\n                e.current = active.current;\r\n                return true;\r\n            }\r\n        };\r\n        return e;\r\n    }\r\n\r\n    Enumerable.prototype.select = function<T,TResult>(selector: IProjectionIndexFunc<T, TResult>): IEnumerableEx<TResult> {\r\n        var e = new Enumerable<TResult>();\r\n        e.getEnumerator = () => selectEnumerator(<IEnumerable<T>>this, selector);\r\n        return e;\r\n    };\r\n    Enumerable.prototype.selectMany = function<T,TResult>(selector: (t: T) => any): IEnumerableEx<TResult> {\r\n        var e = new Enumerable<TResult>();\r\n        e.getEnumerator = () => selectManyEnumerator<T, TResult>(<IEnumerable<T>>this, selector);\r\n        return e;\r\n    };\r\n    if (List) {\r\n        List.prototype.select = Enumerable.prototype.select;\r\n        List.prototype.selectMany = Enumerable.prototype.selectMany;\r\n    }\r\n}","namespace exjs {\r\n    export function selectorEnumerator<T, TResult>(en: IEnumerable<T>): IEnumerator<TResult>;\r\n    export function selectorEnumerator<T, TResult>(arr: T[]): IEnumerator<TResult>;\r\n    export function selectorEnumerator<T, TResult>(obj: any) {\r\n        if (Array.isArray(obj))\r\n            return (<T[]>obj).en().getEnumerator();\r\n        if (obj != null && typeof obj.getEnumerator === \"function\")\r\n            return obj.getEnumerator();\r\n        return null;\r\n    }\r\n}","/// <reference path=\"enumerable.ts\" />\r\n\r\nnamespace exjs {\r\n    function skipEnumerator<T>(prev: IEnumerable<T>, count: number): IEnumerator<T> {\r\n        var t: IEnumerator<T>;\r\n        var e = {\r\n            current: undefined,\r\n            moveNext: function (): boolean {\r\n                if (!t) {\r\n                    t = prev.getEnumerator();\r\n                    for (var i = 0; i < count; i++) {\r\n                        if (!t.moveNext()) return false;\r\n                    }\r\n                }\r\n\r\n                if (!t.moveNext()) {\r\n                    e.current = undefined;\r\n                    return false;\r\n                }\r\n\r\n                e.current = t.current;\r\n                return true;\r\n            }\r\n        };\r\n        return e;\r\n    }\r\n\r\n    function skipWhileEnumerator<T>(prev: IEnumerable<T>, predicate: IProjectionIndexFunc<T, boolean>): IEnumerator<T> {\r\n        var t: IEnumerator<T>;\r\n        var e = {\r\n            current: undefined,\r\n            moveNext: function (): boolean {\r\n                if (!t) {\r\n                    t = prev.getEnumerator();\r\n                    for (var i = 0; t.moveNext(); i++) {\r\n                        if (!predicate(e.current = t.current, i))\r\n                            return true;\r\n                    }\r\n                    e.current = undefined;\r\n                    return false;\r\n                }\r\n\r\n                if (!t.moveNext()) {\r\n                    e.current = undefined;\r\n                    return false;\r\n                }\r\n\r\n                e.current = t.current;\r\n                return true;\r\n            }\r\n        };\r\n        return e;\r\n    }\r\n\r\n    Enumerable.prototype.skip = function<T>(count: number): IEnumerableEx<T> {\r\n        var e = new Enumerable<T>();\r\n        e.getEnumerator = () => skipEnumerator(<IEnumerable<T>>this, count);\r\n        return e;\r\n    };\r\n    Enumerable.prototype.skipWhile = function<T>(predicate: IProjectionIndexFunc<T, boolean>): IEnumerableEx<T> {\r\n        var e = new Enumerable<T>();\r\n        e.getEnumerator = () => skipWhileEnumerator(<IEnumerable<T>>this, predicate);\r\n        return e;\r\n    };\r\n    if (List) {\r\n        List.prototype.skip = Enumerable.prototype.skip;\r\n        List.prototype.skipWhile = Enumerable.prototype.skipWhile;\r\n    }\r\n}","/// <reference path=\"enumerable.ts\" />\r\n\r\nnamespace exjs {\r\n    function takeEnumerator<T>(prev: IEnumerable<T>, count: number): IEnumerator<T> {\r\n        var t: IEnumerator<T>;\r\n        var i = 0;\r\n        var e = {\r\n            current: undefined,\r\n            moveNext: function (): boolean {\r\n                if (!t) t = prev.getEnumerator();\r\n                i++;\r\n                if (i > count)\r\n                    return false;\r\n                e.current = undefined;\r\n                if (!t.moveNext())\r\n                    return false;\r\n                e.current = t.current;\r\n                return true;\r\n            }\r\n        };\r\n        return e;\r\n    }\r\n\r\n    function takeWhileEnumerator<T>(prev: IEnumerable<T>, predicate: IProjectionIndexFunc<T, boolean>): IEnumerator<T> {\r\n        var t: IEnumerator<T>;\r\n        var i = 0;\r\n        var e = {\r\n            current: undefined,\r\n            moveNext: function (): boolean {\r\n                if (!t) t = prev.getEnumerator();\r\n\r\n                if (!t.moveNext() || !predicate(t.current, i)) {\r\n                    e.current = undefined;\r\n                    return false;\r\n                }\r\n                i++;\r\n\r\n                e.current = t.current;\r\n                return true;\r\n            }\r\n        };\r\n        return e;\r\n    }\r\n\r\n    Enumerable.prototype.take = function<T>(count: number): IEnumerableEx<T> {\r\n        var e = new Enumerable<T>();\r\n        e.getEnumerator = () => takeEnumerator(<IEnumerable<T>>this, count);\r\n        return e;\r\n    };\r\n    Enumerable.prototype.takeWhile = function<T>(predicate: IProjectionIndexFunc<T, boolean>): IEnumerableEx<T> {\r\n        var e = new Enumerable<T>();\r\n        e.getEnumerator = () => takeWhileEnumerator(<IEnumerable<T>>this, predicate);\r\n        return e;\r\n    };\r\n    if (List) {\r\n        List.prototype.take = Enumerable.prototype.take;\r\n        List.prototype.takeWhile = Enumerable.prototype.takeWhile;\r\n    }\r\n}","/// <reference path=\"enumerable.ts\" />\r\n\r\nnamespace exjs {\r\n    function traverseEnumerator<T>(prev: IEnumerable<T>, selector: (t: T) => IEnumerable<T>): IEnumerator<T> {\r\n        var started = false;\r\n        var enstack: IEnumerator<T>[] = [];\r\n        var t: IEnumerator<T>;\r\n        var e = {\r\n            current: undefined,\r\n            moveNext (): boolean {\r\n                if (!started) {\r\n                    t = prev.getEnumerator();\r\n                    started = true;\r\n                } else if (t == null) {\r\n                    return false;\r\n                } else {\r\n                    enstack.push(t);\r\n                    t = selectorEnumerator<T, T>(selector(e.current));\r\n                }\r\n\r\n                while (!t || !t.moveNext()) {\r\n                    if (enstack.length < 1)\r\n                        break;\r\n                    t = enstack.pop();\r\n                }\r\n\r\n                e.current = t == null ? undefined : t.current;\r\n                return e.current !== undefined;\r\n            }\r\n        };\r\n        return e;\r\n    }\r\n\r\n    function traverseUniqueEnumerator<T>(prev: IEnumerable<T>, selector: (t: T)=>IEnumerable<T>, turnstile: (t: T) => boolean): IEnumerator<T> {\r\n        var started = false;\r\n        var enstack: IEnumerator<T>[] = [];\r\n        var t: IEnumerator<T>;\r\n        var e = {\r\n            current: undefined,\r\n            moveNext (): boolean {\r\n                if (!started) {\r\n                    t = prev.getEnumerator();\r\n                    started = true;\r\n                } else if (t == null) {\r\n                    return false;\r\n                } else {\r\n                    enstack.push(t);\r\n                    t = selectorEnumerator<T, T>(selector(e.current));\r\n                }\r\n\r\n                do {\r\n                    while (!t || !t.moveNext()) {\r\n                        if (enstack.length < 1)\r\n                            break;\r\n                        t = enstack.pop();\r\n                    }\r\n                    e.current = t == null ? undefined : t.current;\r\n                } while (turnstile(e.current));\r\n\r\n                return e.current !== undefined;\r\n            }\r\n        };\r\n        return e;\r\n    }\r\n\r\n    Enumerable.prototype.traverse = function<T>(selector: any): IEnumerableEx<T> {\r\n        var e = new Enumerable<T>();\r\n        e.getEnumerator = () => traverseEnumerator(<IEnumerable<T>>this, selector);\r\n        return e;\r\n    };\r\n    Enumerable.prototype.traverseUnique = function<T>(selector: any, matcher?: (t1: T, t2: T) => boolean): IEnumerableEx<T> {\r\n        var existing: T[] = [];\r\n        var e = new Enumerable<T>();\r\n        if (matcher) {\r\n            e.getEnumerator = () => traverseUniqueEnumerator(<IEnumerable<T>>this, selector, (x: T) => {\r\n                if (existing.some(e => matcher(x, e)))\r\n                    return true;\r\n                existing.push(x);\r\n                return false;\r\n            });\r\n        } else {\r\n            e.getEnumerator = () => traverseUniqueEnumerator(<IEnumerable<T>>this, selector, (x: T) => {\r\n                if (existing.indexOf(x) > -1)\r\n                    return true;\r\n                existing.push(x);\r\n                return false;\r\n            });\r\n        }\r\n        return e;\r\n    };\r\n    if (List) {\r\n        List.prototype.traverse = Enumerable.prototype.traverse;\r\n        List.prototype.traverseUnique = Enumerable.prototype.traverseUnique;\r\n    }\r\n}","/// <reference path=\"enumerable.ts\" />\r\n\r\nnamespace exjs {\r\n    function unionEnumerator<T>(prev: IEnumerable<T>, second: IEnumerable<T>, comparer?: (f: T, s: T) => boolean): IEnumerator<T> {\r\n        comparer = comparer || function (f: T, s: T) {\r\n            return f === s;\r\n        };\r\n        var t: IEnumerator<T>;\r\n        var visited: T[] = [];\r\n        var s: IEnumerator<T>;\r\n        var e = {\r\n            current: undefined,\r\n            moveNext: function (): boolean {\r\n                if (!t) t = en(prev).distinct().getEnumerator();\r\n                e.current = undefined;\r\n                if (!s && t.moveNext()) {\r\n                    visited.push(e.current = t.current);\r\n                    return true;\r\n                }\r\n                s = s || en(second).distinct().getEnumerator();\r\n                while (s.moveNext()) {\r\n                    for (var i = 0, hit = false, len = visited.length; i < len && !hit; i++) {\r\n                        hit = comparer(visited[i], s.current);\r\n                    }\r\n                    if (!hit) {\r\n                        e.current = s.current;\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n        };\r\n        return e;\r\n    }\r\n\r\n    Enumerable.prototype.union = function<T>(second: any, comparer?: (f: T, s: T) => boolean): IEnumerableEx<T> {\r\n        var en:IEnumerable<T> = second instanceof Array ? second.en() : second;\r\n        var e = new Enumerable<T>();\r\n        e.getEnumerator = () => unionEnumerator(<IEnumerable<T>>this, en, comparer);\r\n        return e;\r\n    };\r\n    if (List)\r\n        List.prototype.union = Enumerable.prototype.union;\r\n}","/// <reference path=\"enumerable.ts\" />\r\n\r\nnamespace exjs {\r\n    function whereEnumerator<T>(prev: IEnumerable<T>, filter: (t: T) => boolean): IEnumerator<T> {\r\n        var t: IEnumerator<T>;\r\n        var e = {\r\n            current: undefined,\r\n            moveNext: function (): boolean {\r\n                if (!t) t = prev.getEnumerator();\r\n                var c: T;\r\n                while (t.moveNext()) {\r\n                    if (filter(c = t.current)) {\r\n                        e.current = c;\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n        };\r\n        return e;\r\n    }\r\n\r\n    Enumerable.prototype.where = function<T>(filter: (t: T) => boolean): IEnumerableEx<T> {\r\n        var e = new Enumerable<T>();\r\n        e.getEnumerator = () => whereEnumerator(<IEnumerable<T>>this, filter);\r\n        return e;\r\n    };\r\n    if (List)\r\n        List.prototype.where = Enumerable.prototype.where;\r\n}","namespace exjs {\r\n    export function en<T>(enu: IEnumerable<T>): IEnumerableEx<T> {\r\n        var x = new Enumerable<T>();\r\n        x.getEnumerator = function (): IEnumerator<T> {\r\n            return wrapEnumerator<T>(enu);\r\n        };\r\n        return <IEnumerableEx<T>>x;\r\n    }\r\n\r\n    function wrapEnumerator<T>(enu: IEnumerable<T>): IEnumerator<T> {\r\n        var wrapped = enu.getEnumerator();\r\n        var x = <IEnumerator<T>>{ current: undefined, moveNext: undefined };\r\n        x.moveNext = function (): boolean {\r\n            if (wrapped.moveNext()) {\r\n                x.current = wrapped.current;\r\n                return true;\r\n            }\r\n            x.current = undefined;\r\n            return false;\r\n        };\r\n        return x;\r\n    }\r\n}\r\nvar ex = exjs.en;","/// <reference path=\"enumerable.ts\" />\r\n\r\nnamespace exjs {\r\n    function zipEnumerator<T, TSecond, TResult>(prev: IEnumerable<T>, second: IEnumerable<TSecond>, resultSelector: (f: T, s: TSecond) => TResult): IEnumerator<TResult> {\r\n        var s: IEnumerator<T>;\r\n        var t: IEnumerator<TSecond>;\r\n        var e = {\r\n            current: undefined,\r\n            moveNext: function (): boolean {\r\n                if (!s) s = prev.getEnumerator();\r\n                if (!t) t = second.getEnumerator();\r\n                e.current = undefined;\r\n                if (!s.moveNext() || !t.moveNext())\r\n                    return false;\r\n                e.current = resultSelector(s.current, t.current);\r\n                return true;\r\n            }\r\n        };\r\n        return e;\r\n    }\r\n\r\n    Enumerable.prototype.zip = function<T, TSecond,TResult>(second: any, resultSelector: (f: T, s: TSecond) => TResult): IEnumerableEx<TResult> {\r\n        var en: IEnumerable<TSecond> = second instanceof Array ? second.en() : second;\r\n        var e = new Enumerable<TResult>();\r\n        e.getEnumerator = () => zipEnumerator<T, TSecond, TResult>(<IEnumerable<T>>this, en, resultSelector);\r\n        return e;\r\n    };\r\n    if (List)\r\n        List.prototype.zip = Enumerable.prototype.zip;\r\n}"]}